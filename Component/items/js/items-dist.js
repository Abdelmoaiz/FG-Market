const{ipcRenderer:ipcRenderer}=require("electron");let tmp,dateNow,typeItems=document.querySelector("#typeItems"),title=document.querySelector("#title"),barcode=document.querySelector("#barcode"),create=document.querySelector("#create"),mood="create",date=new Date;dateNow=date.getMonth()+1<10&&date.getDate()<10?`${date.getFullYear()}-0${date.getMonth()+1}-0${date.getDate()}`:date.getMonth()+1<10&&date.getDate()>10?`${date.getFullYear()}-0${date.getMonth()+1}-${date.getDate()}`:date.getMonth()+1>10&&date.getDate()<10?`${date.getFullYear()}-${date.getMonth()+1}-0${date.getDate()}`:`${date.getFullYear()}-${date.getMonth()+1}-${date.getDate()}`;let dateBarcode=`${date.getFullYear()}${date.getMonth()+1}${date.getDate()}`;function openInputs1(){document.querySelector(".inputs1").style.display="block",document.querySelector(".buttons").style.display="none",title.focus()}let idItems,items=[];function searchBarcode(){for(let e=0;e<items[items.length-1].length;e++){let t=items[items.length-1];barcode.value==t[e].myItems.barcode&&(document.querySelector(".alarm2").style.display="block")}}function getIdItems(){ipcRenderer.send("get-Data","bing"),ipcRenderer.on("get-Data",((e,t)=>{const n=JSON.parse(t);items.push(n),idItems=0!=items.length&&0!=items[items.length-1].length?items[items.length-1].length:0}))}function checkBarcode(){document.querySelector(".alarm2").style.display="none",title.focus()}function cancel(){document.querySelector(".alarm2").style.display="none",barcode.value="",barcode.focus()}let startId=0,endId=1e3;create.addEventListener("click",(e=>{let t;""!=title.value&&(t={date:dateNow,idItems:items[items.length-1].length,title:title.value,typeItems:typeItems.value},"create"===mood?ipcRenderer.send("newItems",t):"update"===mood&&(ipcRenderer.send("update-items",{...t,tmp:tmp}),create.innerHTML="create",mood="create")),window.location.reload(),showData()}));let totalCount,IdDelete,totalBuy=0,totalSales=0,totalSalesAll=0;function showData(){let e="";ipcRenderer.send("get-Data","bing"),ipcRenderer.on("get-Data",((t,n)=>{const d=JSON.parse(n);items.push(d),e="";for(let t=startId;t<endId;t++)for(let n=0;n<items[items.length-1].length;n++)if(t==items[items.length-1][n].myItems.idItems){let d=items[items.length-1];e+=`\n                        <tr>\n                                <td>${t+1}</td>\n                                <td>${d[n].myItems.date}</td>\n                                <td>${d[n].myItems.title}</td>                       \n                                <td>${d[n].myItems.typeItems}</td>                       \n                                <td><button onclick="updateData('${d[n]._id}');">تعديل</button></td>\n                                <td><button onclick="deleteData('${d[n]._id}');">حذف</button></td>\n                        </tr>\n                                \n                    `}document.querySelector(".tbody").innerHTML=e}))}function updateData(e){document.querySelector(".inputs1").style.display="block";for(let t=0;t<items[items.length-1].length;t++)if(items[items.length-1][t]._id==e){let n=items[items.length-1];title.value=n[t].myItems.title,create.innerHTML="تحديث بيانات الصنف",mood="update",tmp=e,title.focus(),scroll({top:0,behavior:"smooth"})}}function deleteData(e){document.querySelector(".alarm1").style.display="block",IdDelete=e}function checkPass(){ipcRenderer.send("delete-items",IdDelete),window.location.reload(),showData()}function searchItems(e){tableItems="";for(let t=0;t<items[items.length-1].length;t++){let n=items[items.length-1];(n[t].myItems.title.includes(e)||n[t].myItems.barcode.includes(e))&&(tableItems+=`\n                    <tr>\n                        <td>${t+1}</td>\n                        <td>${n[t].myItems.date}</td>\n                        <td>${n[t].myItems.barcode}</td>\n                        <td>${n[t].myItems.title}</td>\n                        \n                        <td><button onclick="updateData('${n[t]._id}');">تعديل</button></td>\n                        <td><button onclick="deleteData('${n[t]._id}');">حذف</button></td>\n                    </tr>\n                        \n                `)}document.querySelector(".tbody").innerHTML=tableItems}function refresh(){window.location.reload()}showData();