const{ipcRenderer:ipcRenderer}=require("electron");let tmpEmpl,dateNow,date=new Date;dateNow=date.getMonth()+1<10&&date.getDate()<10?`${date.getFullYear()}-0${date.getMonth()+1}-0${date.getDate()}`:date.getMonth()+1<10&&date.getDate()>10?`${date.getFullYear()}-0${date.getMonth()+1}-${date.getDate()}`:date.getMonth()+1>10&&date.getDate()<10?`${date.getFullYear()}-${date.getMonth()+1}-0${date.getDate()}`:`${date.getFullYear()}-${date.getMonth()+1}-${date.getDate()}`;let userName=document.querySelector(".userName"),dateAndTime=document.querySelector(".dateAndTime");userName.innerHTML=localStorage.getItem("userNameView"),dateAndTime.innerHTML=dateNow;let tmp,users,mood="create";function showInputsclients(){document.querySelector(".inputsSuppliers").style.display="block"}users=null!=localStorage.allUsers?JSON.parse(localStorage.allUsers):[];let tmpSuppliers,suppliers,nameSuppliers=document.querySelector("#nameSuppliers"),idPersonalSuppliers=document.querySelector("#idPersonalSuppliers"),phoneSuppliers=document.querySelector("#phoneSuppliers"),typeItems=document.querySelector("#typeItems"),numItems=document.querySelector("#numItems"),priceItems=document.querySelector("#priceItems"),Totalprice=document.querySelector("#Totalprice"),paidSuppliers=document.querySelector("#paidSuppliers"),remainSuppliers=document.querySelector("#remainSuppliers"),moodSuppliers="create";function getTotalSupp(){Totalprice.value=+numItems.value*+priceItems.value}function getPriceSuppliers(){remainSuppliers.value=Totalprice.value}function calcRemainSuppliers(){remainSuppliers.value=+Totalprice.value-+paidSuppliers.value}suppliers=null!=localStorage.mySuppliers?JSON.parse(localStorage.mySuppliers):[];let tableSuppliers,createSuppliers=document.querySelector(".createSuppliers");function clearInputsSupp(){nameSuppliers.value=idPersonalSuppliers.value=phoneSuppliers.value=typeItems.value=Totalprice.value=paidSuppliers.value=remainSuppliers.value=""}function updateSuppliers(e){nameSuppliers.value=suppliers[e].nameSuppliers,idPersonalSuppliers.value=suppliers[e].idPersonalSuppliers,phoneSuppliers.value=suppliers[e].phoneSuppliers,typeItems.value=suppliers[e].typeItems,Totalprice.value=suppliers[e].Totalprice,paidSuppliers.value=suppliers[e].paidSuppliers,remainSuppliers.value=suppliers[e].remainSuppliers,moodSuppliers="update",nameSuppliers.focus(),scroll({top:0,behavior:"smooth"}),document.querySelector(".createSuppliers").innerHTML="تحديث",tmpSuppliers=e}function deletSuppliers(e){for(let p=0;p<users.length;p++)userName.innerHTML!=users[p].user||"it"!=users[p].job&&"مدير"!=users[p].job||(suppliers.splice(e,1),localStorage.setItem("mySuppliers",JSON.stringify(suppliers)),showDetailsSuppliers(),showTotalSuppliers(),colorRemainSuppliers())}function showDetailsSuppliers(){tableSuppliers="";for(let e=0;e<suppliers.length;e++)tableSuppliers+=`\n                <tr>\n                    <td>${e+1}</td>\n                    <td>${suppliers[e].date}</td>\n                    <td>${suppliers[e].user}</td>\n                    <td>${suppliers[e].nameSuppliers}</td>\n                    <td>${suppliers[e].typeItems}</td>\n                    <td>${suppliers[e].Totalprice}</td>\n                    <td>${suppliers[e].paidSuppliers}</td>\n                    <td class='remainSuppliers'>${suppliers[e].remainSuppliers}</td>\n                    <td><button onclick="updateSuppliers(${e});">تعديل</button></td>\n                    <td><button onclick="deletSuppliers(${e});">حذف</button></td>\n\n                </tr>\n                `;document.querySelector(".tbodySuppliers").innerHTML=tableSuppliers}createSuppliers.addEventListener("click",(e=>{let p="";""!=nameSuppliers.value&&(p={user:userName.innerHTML,date:dateNow,nameSuppliers:nameSuppliers.value,idPersonalSuppliers:idPersonalSuppliers.value,phoneSuppliers:phoneSuppliers.value,typeItems:typeItems.value,Totalprice:Totalprice.value,paidSuppliers:paidSuppliers.value,remainSuppliers:remainSuppliers.value},"create"==moodSuppliers?suppliers.push(p):"update"==moodSuppliers&&(suppliers[tmpSuppliers]=p)),localStorage.setItem("mySuppliers",JSON.stringify(suppliers)),ipcRenderer.send("mySuppliers",p),clearInputsSupp(),showDetailsSuppliers(),showTotalSuppliers(),colorRemainSuppliers()})),showDetailsSuppliers();let totalPriceSuppliers=0,totalPaidSuppliers=0,totalRemainSuppliers=0;function showTotalSuppliers(){for(let e=0;e<suppliers.length;e++)totalPriceSuppliers+=+suppliers[e].Totalprice,totalPaidSuppliers+=+suppliers[e].paidSuppliers,totalRemainSuppliers+=+suppliers[e].remainSuppliers;tableSuppliers+=`\n    <tr>\n        <td colspan='5'>الاجمالي</td>\n        <td>${totalPriceSuppliers}</td>\n        <td>${totalPaidSuppliers}</td>\n        <td class='remainMakeUp'>${totalRemainSuppliers}</td>\n        <td colspan='2'></td>\n    </tr>\n        `,document.querySelector(".tbodySuppliers").innerHTML=tableSuppliers,totalPriceSuppliers=0,totalPaidSuppliers=0,totalRemainSuppliers=0}function colorRemainSuppliers(){let e=document.querySelectorAll(".remainSuppliers");for(let p=0;p<e.length;p++)e[p].innerHTML<0?e[p].style.color="red":e[p].innerHTML>0&&(e[p].style.color="green")}function printPage(){document.querySelector(".addSuppliers").style.display="none",document.querySelector(".searchSuppliers").style.display="none",document.querySelector("aside").style.display="none",document.querySelector("header").style.display="none",document.querySelector(".content").style.width="100%",window.print()}showTotalSuppliers(),colorRemainSuppliers(),document.querySelector(".viewSearchSuppliers").onclick=function(){document.querySelector(".addSuppliers").style.display="none",document.querySelector(".searchSuppliers").style.display="block"},document.querySelector(".viewAddSuppliers").onclick=function(){document.querySelector(".addSuppliers").style.display="block",document.querySelector(".searchSuppliers").style.display="none"};let wordSearchSuppliers=document.querySelector("#wordSearchSuppliers");function searchSuppliers(e){tableSuppliers="";for(let p=0;p<suppliers.length;p++)(e.includes(suppliers[p].nameSuppliers)||e.includes(suppliers[p].date))&&(totalPriceSuppliers+=+suppliers[p].Totalprice,totalPaidSuppliers+=+suppliers[p].paidSuppliers,totalRemainSuppliers+=+suppliers[p].remainSuppliers,tableSuppliers+=`\n                    <tr>\n                        <td>${p+1}</td>\n                        <td>${suppliers[p].date}</td>\n                        <td>${suppliers[p].user}</td>\n                        <td>${suppliers[p].nameSuppliers}</td>\n                        <td>${suppliers[p].typeItems}</td>\n                        <td>${suppliers[p].Totalprice}</td>\n                        <td>${suppliers[p].paidSuppliers}</td>\n                        <td class='remainSuppliers'>${suppliers[p].remainSuppliers}</td>\n                        <td><button onclick="updateSuppliers(${p});">تعديل</button></td>\n                        <td><button onclick="deletSuppliers(${p});">حذف</button></td>\n\n                    </tr>\n                    `);tableSuppliers+=`\n    <tr>\n        <td colspan='5'>الاجمالي</td>\n        <td>${totalPriceSuppliers}</td>\n        <td>${totalPaidSuppliers}</td>\n        <td class='remainMakeUp'>${totalRemainSuppliers}</td>\n        <td colspan='2'></td>\n    </tr>\n        `,document.querySelector(".tbodySuppliers").innerHTML=tableSuppliers,totalPriceSuppliers=0,totalPaidSuppliers=0,totalRemainSuppliers=0}function refresh(){window.location.reload()}